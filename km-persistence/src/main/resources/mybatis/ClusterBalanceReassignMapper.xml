<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.xiaojukeji.know.streaming.km.persistence.mysql.enterprise.rebalance.ClusterBalanceReassignDao">

    <resultMap id="ClusterBalanceReassignDetailMap" type="com.xiaojukeji.know.streaming.km.common.enterprise.rebalance.bean.po.ClusterBalanceReassignPO">
        <result property="jobId" column="job_id"/>
        <result property="clusterId" column="cluster_id"/>
        <result property="topicName" column="topic_name"/>
        <result property="partitionId" column="partition_id"/>
        <result property="originalBrokerIds" column="original_broker_ids"/>
        <result property="reassignBrokerIds" column="reassign_broker_ids"/>
        <result property="startTime" column="start_time"/>
        <result property="finishedTime" column="finished_time"/>
        <result property="extendData" column="extend_data"/>
        <result property="status" column="status"/>
        <result property="createTime" column="create_time"/>
        <result property="updateTime" column="update_time"/>
    </resultMap>

    <insert id="addBatch">
        <![CDATA[
            INSERT INTO ks_km_cluster_balance_reassign (
                job_id,
                cluster_id,
                topic_name,
                partition_id,
                original_broker_ids,
                reassign_broker_ids,
                start_time,
                finished_time,
                extend_data,
                status,
                create_time,
                update_time
            ) VALUES
        ]]>
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.jobId},#{item.clusterId},#{item.topicName},#{item.partitionId},#{item.originalBrokerIds},#{item.reassignBrokerIds},#{item.startTime},#{item.finishedTime},#{item.extendData},#{item.status},#{item.createTime},#{item.updateTime})
        </foreach>
    </insert>
    
    <delete id="deleteBatchByIds">
        <![CDATA[
            DELETE
            FROM
                ks_km_cluster_balance_reassign
            WHERE
                id IN
        ]]>
        <foreach collection="list" index="index" item="item" open="(" separator="," close=")">#{item}</foreach>
    </delete>
</mapper>

